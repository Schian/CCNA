# IPv6

## Part 1

- IPv6 is being implemented due to the shortage of IPv4 addresses
  - Approx 4.2 billion IPv4 addresses (2<sup>32</sup>)
  - VLSM, private IPv4 addresses and NAT have been used to conserve IPv4 addresses
    - All short-term solutions
    - Long-term solution is to go to IPv6
- IPv4 address assignments are controlled by IANA
  - Internet Assigned Numbers Authority
- IPv6 address is **128 bits**
  - 2<sup>128</sup> number of addresses
    - 340 with 12 trailing 0s
- An IPv6 address is written as eight quartets of hex characters
  - `2001:0DB8:5917:EABD:6562:17EA:C92D:59DB`
  - Addresses can be shorted by:
    - Removing leading 0s
      - `2001:0DB8:000A:001B:20A1:0020:0080:34BD` -> `2001:DB8:A:1B:20A1:20:80:34BD`
    - Replacing consecutive 0s with a double colon (::)
      - `2001:0DB8:0000:0000:0000:0000:0080:34BD` -> `2001:0DB8::0080:34DB`
      - Consecutive quartets of 0s can only be abbreviated once in an IPv6 address
    - Both methods can be combined
      - `2001:0DB8:0000:0000:0000:0000:0080:34BD` -> `2001:0DB8::0080:34DB` -> `2001:DB8::80:34DB`
  - Addresses can be expanded by doing the opposite:
    - Put leading 0s where needed (fill each quartet to 4 hexadecimal characters)
      - `FE80::2:0:0:FBE8` -> `FE80::0002:0000:0000:FBE8`
    - Replace all double colons with all-0 quartets, ensuring 8 quartets in total
      - `FE80::0002:0000:0000:FBE8` -> `FE80:0000:0000:0000:0002:0000:0000:FBE8`

### Finding the IPv6 prefix (global unicast addresses)

- Typically, an enterprise requesting IPv6 addresses from their ISP will receive a /48 block
- Typically, IPv6 subnets use a /64 prefix length
- This means an enterprise has 16 bits to use to make subnets
- The remaining 64 bits can be used for hosts

```txt
|2001:0DB8:8B00| : |0001| : |0000:0000:0000:0001| /64

The first three quartets (48-bits)
    2001:0DB8:8B00
Are used as the 'global routing prefix' and are assigned by the ISP

The next quartet (16-bits)
    0001
Are used as the 'subnet identifier', used by the enterprise to make various subnets

The last four quartets (64-bits)
    0000:0000:0000:0001
Are used as the 'interface identifier', the host portion of the address
```

- If the 'slash prefix' is a multiple of 4, just count the number of characters
  - Remember each quartet is 16 bits
- If the 'slash prefix' is not a multiple of 4 and the count will end 'inside' a character
  1. Convert the character to binary
  2. Count the required number of extra bits
  3. Replace all bits after the required with 0s
  4. Convert back to hexadecimal

![Finding the IPv6 prefix](./images/finding_ipv6_prefix.png)

## Part 2

## Part 3

## Configuration

### Configuration - Part 1

- Show IPv6 interface details
  - `R1#show ipv6 interface brief`
- Allow the router to perform IPv6 routing
  - `R1(config)#ipv6 unicast-routing`
- Assign an IPv6 address
  - `R1(config)#int g0/0`
  - `R1(config-if)#ipv6 address 2001:db8::1/64`
    - Note: any method of shortening can be used. The router will know
  - `R1(config-if)#no shutdown`

### Configuration - Part 2
